<!doctype html>
<html>
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, maximum-scale=1.0, minimum-scale=1.0">
        <title>Quink Example - onready publication</title>
        <script type="text/javascript" src="../quink.js"></script>
    </head>
    <body>
        <div contenteditable="true">
            This is editable... enter text here including a carriage return...
        </div>
        <div id="counter">Found 0 carriage returns.</div>
        <script type="text/javascript">
            QUINK.ready = function (PubSub) {
                console.log('Quink is ready for use.');
                PubSub.subscribe('insert.char', (function () {
                    var count = 0;
                    return function (event) {
                        if (event.keyCode === 13) {
                            count += 1;
                            document.querySelector('#counter').innerHTML = 'Found ' + count + ' carriage returns.';
                        }
                    };
                }()));
            };
        </script>
    <body>
</html>
