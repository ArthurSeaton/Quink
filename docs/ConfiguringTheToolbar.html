<!DOCTYPE html>
<html><head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, maximum-scale=1.0, minimum-scale=1.0">
        <title>Configuring the Quink toolbar</title>
        <script type="text/javascript" src="../quink.js"></script>
    </head>
    <body>
        <div contenteditable="true"><span class="qk_style_size_x_Large"><span class="qk_style_mixin_Bold">Configuring the Quink Toolbar</span></span><div><br></div><div>Quink comes with a toolbar that provides a range of editing functionality. The toolbar can be configured to suit particular needs and this document explains how that can be achieved.</div><div><br></div><div><span class="qk_style_size_Large qk_style_mixin_Bold">Overview</span></div><div><br></div><div>In Quink there is always a current toolbar configuration. To change the current configuration you invoke <span class="qk_style_name_Courier">configureToolbar</span> providing an edit configuration. The edit config and the current config are merged to produce the new toolbar configuration.</div><div><br></div><div>Each configuration can have an associated defaults object. The defaults object is used to set one or more properties on each object within the configuration without having to explicitly provide the setting on every object. The properties in the default object are only used where the config object does not explicitly specify a property of the same name. The defaults object is optional.</div><div><br></div><div>In addition to the edit configuration <span class="qk_style_name_Courier">configureToolbar</span> takes an optional second argument that is a settings object. The settings object is applied to the current configuration before it is merged with the edit object. The settings object can be used to change what happens to those objects in the current configuration that are not referenced in the edit configuration.</div><div><br></div><div>The final toolbar markup is generated from the new toolbar configuration. Objects that are hidden in the configuration do not result in any markup in the final toolbar.</div><div><br></div><div><span class="qk_style_size_Large qk_style_mixin_Bold">Details</span></div><div><br></div><div>The file <span class="qk_style_name_Courier">toolbarDef.json</span> provides the start point for creating the toolbar. This file contains an array of groups plus a defaults object. A group maps to a tab within the current toolbar and each item within a group maps to an item within a tab. When <span class="qk_style_name_Courier">configureToolbar</span> is called the configuration that's provided is run against the current toolbar configuration (initially the one specified in the json file) and a new toolbar definition is created. The intent is to provide a mechanism that allows for small changes to existing toolbar configurations without having to specify large amounts of configuration.</div><div><br></div><div>As an example take the json below as the toolbar definition:</div><div><br></div><div><span class="qk_style_name_Courier">{
    "groups": [
        {
            "id": "group1",
            "label": "Group1",
            "items": [
                {
                    "id": "bold",
                    "cssClass": "qk_button_bg_bold",
                    "command": "execCommand",
                    "commandArgs": "font.bold"
                }
            ]
        }
    ]
}

</span></div><div><br></div><div>This shows a single group that in turn contains a single item. The properties are as follows:</div><div><ul><li><span class="qk_style_name_Courier">id</span> - the id property is used as a unique identifier for the object. Both groups and items within groups have id properties.</li><li><span class="qk_style_name_Courier">label</span> - label only applies at group level and is used as the text in the toolbar tab.</li><li><span class="qk_style_name_Courier">items</span> - used at group level to contain the items within the group.</li><li><span class="qk_style_name_Courier">cssClass</span> - item level property used to style the item.</li><li><span class="qk_style_name_Courier">command</span> - the command that will be invoked when the item is hit. This applies at both group and item level although at group level the default is usually what's needed so it doesn't need to be specified.</li><li><span class="qk_style_name_Courier">commandArgs</span> - again this applies at both group and item level although at group level the default is usually fine so it doesn't need to be specified.</li></ul><div>This example shows a very simple toolbar definition. By default Quink will read the toolbar definition from <span class="qk_style_name_Courier">quink/resources/toolbarDef.json</span>. This can be overriden using the toolbarDef url query param. The json has been saved into <span class="qk_style_name_Courier">examples/toolbarDefEx1.json,</span> so to show this page with a toolbar configured using that defintion add this url param to the document url:</div></div><div><br></div><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><div><span class="qk_style_name_Courier">toolbarDef=../examples/toolbarDefEx1.json</span></div></blockquote><div><br></div><div>The toolbar should load with a one tab named <span class="qk_style_name_Courier">Group1</span> and one item that when hit emboldens the selected text.</div><div><br></div><div><span class="qk_style_size_Large qk_style_mixin_Bold">Example 1</span></div><div><br></div><div>To make the following explanation simpler the toolbar definition above will be used as the basis for future examples. In order to avoid having to specify the query parameter all the time an example has been setup that passes the <span class="qk_style_name_Courier">toolbardef</span> parameter in via the <span class="qk_style_name_Courier">QUINK</span> config object. The example is <a href="examples/toolbarCOnfigEx1.html">here</a>. In the example the toolbar is set to show on load and the toolbar configuration set as follows:</div><div><br></div><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><div><span class="qk_style_name_Courier">QUINK = {</span></div><div><span class="qk_style_name_Courier">    params: {</span></div><div><span class="qk_style_name_Courier">        toolbar: 'on',</span></div><div><span class="qk_style_name_Courier">        toolbardef: 'toolbarDefEx1.json'</span></div><div><span class="qk_style_name_Courier">    }</span></div><div><span class="qk_style_name_Courier">};</span></div></blockquote><div><br></div><div><span class="qk_style_size_Large qk_style_mixin_Bold">Example 2</span></div><div><br></div><div>To start configuring the toolbar we'll make a very simple change. Just change the group label from its current value to a new one. The definition to do this is shown below:</div><div><br></div><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><div><div style="text-align: left;"><span class="qk_style_name_Courier">ready: function () {</span></div></div><div><div style="text-align: left;"><span class="qk_style_name_Courier">    QUINK.configureToolbar({</span></div></div><div><span class="qk_style_name_Courier">        groups:[{</span></div><div><div style="text-align: left;"><span class="qk_style_name_Courier">            label: 'Foo'</span></div></div><div><span class="qk_style_name_Courier">            id: 'group1',</span></div><div><span class="qk_style_name_Courier">        }]</span></div><div><div style="text-align: left;"><span class="qk_style_name_Courier">    }</span></div></div><div><div style="text-align: left;"><span class="qk_style_name_Courier">});</span></div></div></blockquote><div><br></div><div>In this instance <span class="qk_style_name_Courier">configureToolbar</span> is called from the <span class="qk_style_name_Courier">QUINK</span> ready function. <span class="qk_style_name_Courier">QUINK.ready</span> is invoked by Quink as soon as the editor has been fully loaded and is ready for use. You can see this example <a href="examples/toolbarConfigEx2.html">here</a>.</div><div><br></div><div><span class="qk_style_size_Large qk_style_mixin_Bold">Example 3</span></div><div><br></div><div>To add another item into the existing group you need to provide the configuration for that item. The third example shows this and you can see the example <a href="examples/toolbarConfigEx3.html">here</a>. The configuration used is shown below:</div><div><br></div><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><div><span class="qk_style_name_Courier">groups:[{</span></div><div><span class="qk_style_name_Courier">    id: 'group1',</span></div><div><span class="qk_style_name_Courier">    items: [{</span></div><div><span class="qk_style_name_Courier">        id: 'newitem',</span></div><div><span class="qk_style_name_Courier">        cssClass: 'ex3_item_style',</span></div><div><span class="qk_style_name_Courier">        command: 'execCommand',</span></div><div><span class="qk_style_name_Courier">        commandArgs: 'font.italic'</span></div><div><span class="qk_style_name_Courier">    }]</span></div><div><span class="qk_style_name_Courier">}]</span></div></blockquote><div><br></div><div>This configuration is passed into configureToolbar in the same way as before. The group id in the configuration object matches the id in the original toolbar definition, so the items are used to configure the existing group's items. The id for the item in the configuration doesn't match the existing group item's id, so the config is used to create a new group item. The cssClass is defined in the example document and the definition is shown below.</div><div><br></div><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><div><span class="qk_style_name_Courier">.ex3_item_style {</span></div><div><span class="qk_style_name_Courier">    background-color: red;</span></div><div><span class="qk_style_name_Courier">}</span></div></blockquote><div><br></div><div>So in this instance the toolbar button is rendered with a red background.</div><div><br></div><div>The item has two additional properties that are the command that will be invoked when the button is activated and any arguments that will be passed to the command on invocation. In this case the command is <span class="qk_style_name_Courier">execCommand</span> and the arguments are <span class="qk_style_name_Courier">font.italic. execCommand</span> is a Quink function that uses Quink's publish/subscribe mechanism to send a publication that will result in the selected text being changed. In this case the change is to make it italic.</div><div><span class="qk_style_name_Courier"><br></span></div><div><span class="qk_style_size_Large qk_style_mixin_Bold">Example 4</span></div><div><span class="qk_style_name_Courier"><br></span></div><div>Any function can be invoked using this mechanism but Quink has to be able to resolve the function using the function name provided in the toolbar configuration. To be able to do that for external functions Quink searches the global <span class="qk_style_name_Courier">QUINK</span> object then the <span class="qk_style_name_Courier">window</span> object. Look <a href="examples/toolbarConfigEx4.html">here</a> to see an example of this. The configuration is similar to the previous example but this time instead of using <span class="qk_style_name_Courier">execCommand</span> as the command, the configuration uses a function that has been defined on the <span class="qk_style_name_Courier">QUINK</span> object. This time if you hit the button an alert is popped up.</div><div><br></div><div>Below is the toolbar configuration and the definition of the function that are used to achieve this.</div><div><br></div><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><div><span class="qk_style_name_Courier">ready: function () {</span></div><div><span class="qk_style_name_Courier">    QUINK.configureToolbar({</span></div><div><span class="qk_style_name_Courier">        groups:[{</span></div><div><span class="qk_style_name_Courier">            id: 'group1',</span></div><div><span class="qk_style_name_Courier">            items: [{</span></div><div><span class="qk_style_name_Courier">                id: 'newitem',</span></div><div><span class="qk_style_name_Courier">                cssClass: 'ex3_item_style',</span></div><div><span class="qk_style_name_Courier">                command: 'alertMe',</span></div><div><span class="qk_style_name_Courier">                commandArgs: 'Hi there!'</span></div><div><span class="qk_style_name_Courier">            }]</span></div><div><span class="qk_style_name_Courier">        }]</span></div><div><span class="qk_style_name_Courier">    });</span></div><div><span class="qk_style_name_Courier">},</span></div><div><span class="qk_style_name_Courier">
</span></div><div><span class="qk_style_name_Courier">alertMe: function (event, greeting) {</span></div><div><span class="qk_style_name_Courier">    alert(greeting);</span></div><div><span class="qk_style_name_Courier">}</span></div></blockquote><div><br></div><div>Functions invoked in this way always have a first argument which is the event that caused their invocation.</div><div><br></div><div><span class="qk_style_size_Large qk_style_mixin_Bold">Example 5</span></div><div><br></div><div>Now suppose that you want the new toolbar item but not the old one. The way to achieve that is to hide the item that you don't want to appear on the toolbar. Hidden items remain in the toolbar configuration but there is no markup generated for them. There are three ways in which this can be achieved and the following three examples show them in turn.</div><div><br></div><div>To hide an item explicitly you match the item's <span class="qk_style_name_Courier">id</span> and specify a <span class="qk_style_name_Courier">hidden</span> property with a value of <span class="qk_style_name_Courier">true</span>. This is exactly the same as the way the group label was changed in the second example and is shown <a href="examples/toolbarDefEx5.html">here</a>. The config is shown below.</div><div><br></div><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><div><span class="qk_style_name_Courier">groups:[{</span></div><div><span class="qk_style_name_Courier">    id: 'group1',</span></div><div><span class="qk_style_name_Courier">    items: [{</span></div><div><span class="qk_style_name_Courier">        id: 'newitem',</span></div><div><span class="qk_style_name_Courier">        cssClass: 'ex3_item_style',</span></div><div><span class="qk_style_name_Courier">        command: 'alertMe',</span></div><div><span class="qk_style_name_Courier">        commandArgs: 'Hi there!'</span></div><div><span class="qk_style_name_Courier">    }, {</span></div><div><span class="qk_style_name_Courier">        id: 'bold',</span></div><div><span class="qk_style_name_Courier">        hidden: true</span></div><div><span class="qk_style_name_Courier">    }]</span></div><div><span class="qk_style_name_Courier">}]</span></div></blockquote><div><br></div><div><span class="qk_style_size_Large qk_style_mixin_Bold">Example 6</span></div><div><br></div><div>The second way to hide an object in the original configuration is to provide a second argument to <span class="qk_style_name_Courier">configureToolbar</span>. The second argument is an object whose properties are forced onto the existing configuration before the new configuration is applied. An example of this approach can be seen <a href="examples/toolbarDefEx6.html">here</a>, with the toolbar configuration shown below.</div><div><br></div><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><div><font face="Courier New, Courier, monospace">QUINK.configureToolbar({
    groups:[{
        id: 'group1',
        items: [{
            id: 'newitem',
            cssClass: 'ex3_item_style',
            command: 'alertMe',
            commandArgs: 'Hi there!'
        }]
    }]
}, {
    hidden: true
});</font>
</div><div><br></div></blockquote><div>The second argument hides all of the objects in the current configuration before the new configuration is applied. Objects not reference in the new config remain hidden.</div><div><br></div><div>Both example 5 and example 6 achieve the same result but using different techniques. Which way is best depends on the situation.</div><div><br></div><div><span class="qk_style_mixin_Bold qk_style_size_Large">Example 7</span></div><div><br></div><div>You can order items within a group using the index property. To see how this works look at <a href="examples/toolbarConfigEx7.html">this example</a> and the configuration shown below.</div><div><br></div><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><div><span class="qk_style_name_Courier">id: 'group1',</span></div><div><span class="qk_style_name_Courier">items: [{</span></div><div><span class="qk_style_name_Courier">    id: 'newitem',</span></div><div><span class="qk_style_name_Courier">    index: 0,</span></div><div><span class="qk_style_name_Courier">    cssClass: 'ex3_item_style',</span></div><div><span class="qk_style_name_Courier">    command: 'alertMe',</span></div><div><span class="qk_style_name_Courier">    commandArgs: 'Hi there!'</span></div><div><span class="qk_style_name_Courier">}]</span></div></blockquote><div><br></div><div>This example is exactly the same as <a href="examples/toolbarConfigEx4.html">example 4</a> but with the addition of the index property for the new item. The value of the index property is 0 which means that it will be placed at  the start of the group's items. When the toolbar displays the red button is the first one in the group.</div><div><br></div><div><span class="qk_style_size_Large qk_style_mixin_Bold">Example 8</span></div><div><br></div><div>To add new toolbar groups the process is very similar to adding a new item within an existing group. Just provide a configuration that contains a group object whose id property doesn't match the id property for any existing group item. Then provide an items property for the new group that contains the items that you want to use. You can find an example <a href="examples/toolbarConfigEx8.html">here</a> and the configuration is shown below.</div><div><br></div><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><div><span class="qk_style_name_Courier">groups:[{</span></div><div><span class="qk_style_name_Courier">    id: 'group2',</span></div><div><span class="qk_style_name_Courier">    label: 'New Group',</span></div><div><span class="qk_style_name_Courier">    active: true,</span></div><div><span class="qk_style_name_Courier">    items:[{</span></div><div><span class="qk_style_name_Courier">        id: 'g2i1',</span></div><div><span class="qk_style_name_Courier">        cssClass: 'red',</span></div><div><span class="qk_style_name_Courier">        command: 'mycommand',</span></div><div><span class="qk_style_name_Courier">        commandArgs: 'item 1'</span></div><div><span class="qk_style_name_Courier">    }, {</span></div><div><span class="qk_style_name_Courier">        id: 'g2i2',</span></div><div><span class="qk_style_name_Courier">        cssClass: 'blue',</span></div><div><span class="qk_style_name_Courier">        command: 'mycommand',</span></div><div><span class="qk_style_name_Courier">        commandArgs: 'item 2'</span></div><div><span class="qk_style_name_Courier">    }]</span></div><div><span class="qk_style_name_Courier">}]</span></div></blockquote><div><br></div><div>The new group item is given a <span class="qk_style_name_Courier">label</span> but not an <span class="qk_style_name_Courier">index</span>, so it will be added after any existing groups. It does have an <span class="qk_style_name_Courier">active</span> property that is set to <span class="qk_style_name_Courier">true</span>. This ensures that the new group will be shown when the toolbar is displayed even though it is not the first group. If not group objects are explicitly set active the first group will be the active group.</div><div><br></div><div>The new group contains two items that are similar to those we've already seen in previous examples. Both items display an alert when hit.</div><div><br></div><div><span class="qk_style_size_Large qk_style_mixin_Bold">Example 9</span></div><div><br></div><div>For the next few examples we'll use a new initial toolbar configuration that is shown below.</div><div><br></div><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><div><span class="qk_style_name_Courier">{</span></div><div><span class="qk_style_name_Courier">    "groups": [</span></div><div><span class="qk_style_name_Courier">        {</span></div><div><span class="qk_style_name_Courier">            "id": "group1",</span></div><div><span class="qk_style_name_Courier">            "label": "Group1",</span></div><div><span class="qk_style_name_Courier">            "items": [</span></div><div><span class="qk_style_name_Courier">                {</span></div><div><span class="qk_style_name_Courier">                    "id": "item1",</span></div><div><span class="qk_style_name_Courier">                    "cssClass": "red",</span></div><div><span class="qk_style_name_Courier">                    "command": "mycommand",</span></div><div><span class="qk_style_name_Courier">                    "commandArgs": "item 1"</span></div><div><span class="qk_style_name_Courier">                },</span></div><div><span class="qk_style_name_Courier">                {</span></div><div><span class="qk_style_name_Courier">                    "id": "item2",</span></div><div><span class="qk_style_name_Courier">                    "cssClass": "blue",</span></div><div><span class="qk_style_name_Courier">                    "command": "mycommand",</span></div><div><span class="qk_style_name_Courier">                    "commandArgs": "item 2"</span></div><div><span class="qk_style_name_Courier">                },</span></div><div><span class="qk_style_name_Courier">                {</span></div><div><span class="qk_style_name_Courier">                    "id": "item3",</span></div><div><span class="qk_style_name_Courier">                    "cssClass": "green",</span></div><div><span class="qk_style_name_Courier">                    "command": "mycommand",</span></div><div><span class="qk_style_name_Courier">                    "commandArgs": "item 3"</span></div><div><span class="qk_style_name_Courier">                }</span></div><div><span class="qk_style_name_Courier">            ]</span></div><div><span class="qk_style_name_Courier">        }</span></div><div><span class="qk_style_name_Courier">    ]</span></div><div><span class="qk_style_name_Courier">}</span></div></blockquote><div><br></div><div>This has one group that contains three items each of which alert their item number when hit. The styling and the command function are provided by the pages and are shown here.</div><div><br></div><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><div><span class="qk_style_name_Courier">&lt;style&gt;</span></div><div><span class="qk_style_name_Courier">    .red {</span></div><div><span class="qk_style_name_Courier">        background-color: red;</span></div><div><span class="qk_style_name_Courier">    }</span></div><div><span class="qk_style_name_Courier">    .blue {</span></div><div><span class="qk_style_name_Courier">        background-color: blue;</span></div><div><span class="qk_style_name_Courier">    }</span></div><div><span class="qk_style_name_Courier">    .green {</span></div><div><span class="qk_style_name_Courier">        background-color: green;</span></div><div><span class="qk_style_name_Courier">    }</span></div><div><span class="qk_style_name_Courier">&lt;/style&gt;</span></div></blockquote><div><br></div><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><div><span class="qk_style_name_Courier">function mycommand(event, args) {</span></div><div><span class="qk_style_name_Courier">    alert(args);</span></div><div><span class="qk_style_name_Courier">}</span></div></blockquote><div><br></div><div>As you can see the styling and command function are very similar to those used in previous examples. The example is <a href="examples/toolbarConfigEx9.html">here</a>. Hitting the buttons alerts the items in order.</div><div><br></div><div><span class="qk_style_size_Large qk_style_mixin_Bold">Example 10</span></div><div><br></div><div>Now suppose you want to add a new group and populate it with the items in the original group. To do that you'd add the new group in the same way as before and populate the items list using the <span class="qk_style_name_Courier">id</span> properties of the items from the original group. The example can be see <a href="examples/toolbarConfigEx10.html">here</a> and the configuration is shown below.</div><div><br></div><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><div><span class="qk_style_name_Courier">groups: [{</span></div><div><span class="qk_style_name_Courier">    id: 'newgroup',</span></div><div><span class="qk_style_name_Courier">    label: 'New Group',</span></div><div><span class="qk_style_name_Courier">    active: true,</span></div><div><span class="qk_style_name_Courier">    items: [{</span></div><div><span class="qk_style_name_Courier">        id: 'item3'</span></div><div><span class="qk_style_name_Courier">    }</span><span style="font-family: 'Courier New', Courier, monospace;">]</span></div><div><span class="qk_style_name_Courier">}]</span></div></blockquote><div><br></div><div>When loaded the example shows a toolbar that contains two groups with the new group being active and containing the last of the original items.</div><div><br></div><div><span class="qk_style_size_Large qk_style_mixin_Bold">Example 11</span></div><div><br></div><div>Now we want to add another of the original items into the new group. To do this we'll add a button into the page that will allow us to call <span class="qk_style_name_Courier">configureToolbar</span> and provide a configuration that adds the item. The example is <a href="examples/toolbarConfigEx11.html">here</a> and the new code is shown below.</div><div><br></div><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><div><span class="qk_style_name_Courier">function addItem() {</span></div><div><span class="qk_style_name_Courier">    QUINK.configureToolbar({</span></div><div><span class="qk_style_name_Courier">        groups: [{</span></div><div><span class="qk_style_name_Courier">            id: 'newgroup',</span></div><div><span class="qk_style_name_Courier">            active: true,</span></div><div><span class="qk_style_name_Courier">            items: [{</span></div><div><span class="qk_style_name_Courier">                id: 'item1'</span></div><div><span class="qk_style_name_Courier">            }]</span></div><div><span class="qk_style_name_Courier">        }]</span></div><div><span class="qk_style_name_Courier">    });</span></div><div><span class="qk_style_name_Courier">}</span></div></blockquote><div><br></div><div>The <span class="qk_style_name_Courier">addItem</span> function is invoked when the <span class="qk_style_name_Courier">Add Item</span> button is hit and the result is a new toolbar that now contains two of the original items in the new group but in a different order to the original group.</div><div><br></div><div>A point to note is that <span class="qk_style_name_Courier">configureToolbar</span> always works from the latest toolbar definition and not from the original definition. The original definition only contained one group. A second group containing one item was added in <a href="examples/toolbarDefEx10.html">example 10</a> and <a href="examples/toolbarDefEx11.html">example 11</a> built on this by adding a second item into the new group. This way of working lets you make incremental changes without having to re-specify the same changes over and over again.</div><div><br></div><div><span class="qk_style_size_Large qk_style_mixin_Bold">Example 12</span></div><div><br></div><div>However there might be cases where you want to discard a changed definition and start again with the original one applying changes to that. Or you might want to start from scratch and build a toolbar without regard to any previous definitions. To do that you should specify a settings object to <span class="qk_style_name_Courier">configureToolbar.</span> The <span class="qk_style_name_Courier">settings</span> object sets <span class="qk_style_name_Courier">hidden</span> to <span class="qk_style_name_Courier">true</span>. The <span class="qk_style_name_Courier">settings</span> object is applied to all of the objects in the current definition before the edit definition is merged. So hiding everything in the current definition mean that only objects explicitly specified in the edit config will be present in the final toolbar markup.</div><div><br></div><div><a href="examples/toolbarDefEx12.html">Example 12</a> shows a page that contains three buttons: <span class="qk_style_name_Courier">Add, Replace</span> and <span class="qk_style_name_Courier">Reset</span>. The initial configuration is as for example 9 and provides a single group that contains three items. The <span class="qk_style_name_Courier">Add</span> and <span class="qk_style_name_Courier">Replace</span> buttons add a new group and successively add a new item from the original group into the new one. The difference between the two buttons is that <span class="qk_style_name_Courier">Replace</span> provides a <span class="qk_style_name_Courier">settings</span> object to <span class="qk_style_name_Courier">configureToolbar</span>. The <span class="qk_style_name_Courier">settings</span> object hides everything in the current configuration before merging the edit config. The <span class="qk_style_name_Courier">Add</span> button uses the same edit config as the <span class="qk_style_name_Courier">Replace</span> button but does not provide a <span class="qk_style_name_Courier">settings</span> object.</div><div><br></div><div>The <span class="qk_style_name_Courier">settings</span> object completely changes the way that the final toolbar looks. Each time the <span class="qk_style_name_Courier">Add</span> button is hit the effect is to add a new item into the new group. Each time the <span class="qk_style_name_Courier">Replace</span> button is hit a new item is added to the new group, but every object in the previous configuration is hidden so the only group showing is the new group and the only item showing is the newly added item. Everything else has been hidden by the <span class="qk_style_name_Courier">settings</span> object.</div><div><br></div><div>The code for the example is shown below commented to explain how it works.</div><div><br></div><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><div><font face="Courier New, Courier, monospace">var originalConfig, // Used to hold the original toolbar configuration.
    id = 1;         // id of the next item to be added.

// Switch the toolbar on and set the initial toolbar configuration.
QUINK = {
    params: {
        toolbar: 'on',
        toolbardef: 'toolbarDefEx2.json'
    }
};

// Invoked when the toolbar buttons are hit.
function mycommand(event, args) {
    alert(args);
}

// Save off the starting configuration.
QUINK.ready = function () {
    originalConfig = QUINK.configureToolbar({});
};

// Stops any attempt to add more items than are available in the initial configuration.
function disableButtons(value) {
    Array.prototype.forEach.call(document.querySelectorAll('.additem'), function (btn) {
        btn.disabled = value;
    });
}

// Makes the change to the toolbar configuration.
function addItemToToolbar(settings) {
    var itemId = 'item' + id++;
    QUINK.configureToolbar({
        groups: [{
            id: 'newgroup',
            active: true,
            label: 'New Group',
            items: [{
                id: itemId
            }]
        }]
    }, settings);
    if (id &gt; originalConfig.groups[0].items.length) {
        disableButtons(true)
    }
}

// Supply a settings object that hides everything.
function replaceItem() {
    addItemToToolbar({
        hidden: true
    });
}

// No settings object so adding is incremental.
function addItem() {
    addItemToToolbar();
}

// Reset to the initial toolbar configuration.
function reset() {
    QUINK.configureToolbar(originalConfig, {
        hidden: true
    });
    id = 1;
    disableButtons(false);
}</font></div></blockquote><div><br></div><div>And the events for the buttons.</div><div><br></div><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><div><span class="qk_style_name_Courier">&lt;button class="additem" onclick="addItem();"&gt;Add&lt;/button&gt;</span></div><div><span class="qk_style_name_Courier">&lt;button class="additem" onclick="replaceItem();"&gt;Replace&lt;/button&gt;</span></div><div><span class="qk_style_name_Courier">&lt;button onclick="reset();"&gt;Reset&lt;/button&gt;</span></div></blockquote><div><br></div><div>The <span class="qk_style_name_Courier">Reset</span> button is needed because the original configuration only contains three items so the buttons can only be hit three times before there are no more items left to be added. <span class="qk_style_name_Courier">Reset</span> invokes <span class="qk_style_name_Courier">configureToolbar</span> with the configuration that existed before any changes were made and passes in a settings objects that hides everything. This results in the same toolbar that existed prior to making any changes.</div><div><br></div><div><br></div><div><span class="qk_style_size_Large qk_style_mixin_Bold">Summary</span></div><div><br></div><div>Quink comes with a toolbar that can be configured to suit the needs of many different applications. It can be full of tabs and buttons or it can be small and minimal with only a few buttons. There are a number of key concepts involved in configuring the toolbar. These have been shown in the examples above and are summarised here.</div><div><br></div><div><ul><li>Toolbar configuration starts with a json document that provides the base configuration. This is usually in <span class="qk_style_name_Courier">quink/resources/toolbarDef.json.</span> If an application wants to use a different base configuration the <span class="qk_style_name_Courier">toolbardef</span> parameter should be used to point to the definition.</li><li>To change the toolbar configuration invoke the function <span class="qk_style_name_Courier">QUINK.configureToolbar</span> and pass in a new toolbar configuration object. The new object should be a combination of groups and items within groups.</li><li>A configuration can have a default object that provides default values for properties that are not specified explicitly in the config object.</li><li><span class="qk_style_name_Courier">configureToolbar</span> can take a second argument that is a settings object. The properties in this object are set onto the current configuration before it is merged with the edit config.</li><li>The edit configuration is merged with the existing configuration to produce the new configuration.</li><li>To reference existing objects use the object's <span class="qk_style_name_Courier">id</span> property.</li><li>To hide or show objects use the <span class="qk_style_name_Courier">hidden</span> property.</li><li>To change the order of objects within the configuration either change the order within the configuration or use the <span class="qk_style_name_Courier">index</span> property.</li><li><span class="qk_style_name_Times_New_Roman">configureToolbar</span> returns the configuration that was current when the function was invoked.</li></ul><div><br></div></div></div>
    

</body></html>